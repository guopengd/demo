(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["3798"],{3798:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"search-con search-con-top"},[a("ButtonGroup",[a("Button",{staticClass:"search-btn",attrs:{disabled:!t.value.menuId,type:"primary"},on:{click:function(e){t.handleModal()}}},[a("Icon",{attrs:{type:"search"}}),t._v("  新建操作\n      ")],1)],1)],1),a("Table",{attrs:{columns:t.columns,data:t.data},scopedSlots:t._u([{key:"status",fn:function(t){var e=t.row;return[1===e.status?a("Badge",{attrs:{status:"success",text:"有效"}}):a("Badge",{attrs:{status:"error",text:"无效"}})]}},{key:"action",fn:function(e){var o=e.row;return[a("a",{on:{click:function(e){t.handleModal(o)}}},[t._v("编辑")]),t._v("  \n      "),a("Poptip",{attrs:{confirm:"",title:"确定删除吗?"},on:{"on-ok":function(e){t.handleRemove(o)}}},[a("a",[t._v("删除")])])]}}])}),a("Modal",{attrs:{title:t.modalTitle,width:"680"},on:{"on-cancel":t.handleReset},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[a("Form",{ref:"actionForm",attrs:{model:t.formItem,rules:t.formItemRules,"label-width":100}},[a("FormItem",{attrs:{label:"所属菜单"}},[a("Input",{attrs:{disabled:""},model:{value:t.value.menuName,callback:function(e){t.$set(t.value,"menuName",e)},expression:"value.menuName"}})],1),a("FormItem",{attrs:{label:"操作标识",prop:"actionCode"}},[a("Input",{attrs:{placeholder:"请输入内容"},model:{value:t.formItem.actionCode,callback:function(e){t.$set(t.formItem,"actionCode",e)},expression:"formItem.actionCode"}})],1),a("FormItem",{attrs:{label:"操作名称",prop:"actionName"}},[a("Input",{attrs:{placeholder:"请输入内容"},model:{value:t.formItem.actionName,callback:function(e){t.$set(t.formItem,"actionName",e)},expression:"formItem.actionName"}})],1),a("FormItem",{attrs:{label:"请求地址",prop:"path"}},[a("Input",{attrs:{placeholder:"请输入内容"},model:{value:t.formItem.path,callback:function(e){t.$set(t.formItem,"path",e)},expression:"formItem.path"}})],1),a("FormItem",{attrs:{label:"优先级"}},[a("InputNumber",{model:{value:t.formItem.priority,callback:function(e){t.$set(t.formItem,"priority",e)},expression:"formItem.priority"}})],1),a("FormItem",{attrs:{label:"状态"}},[a("i-switch",{attrs:{size:"large"},model:{value:t.formItem.statusSwatch,callback:function(e){t.$set(t.formItem,"statusSwatch",e)},expression:"formItem.statusSwatch"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("有效")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("无效")])])],1),a("FormItem",{attrs:{label:"描述"}},[a("Input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:t.formItem.actionDesc,callback:function(e){t.$set(t.formItem,"actionDesc",e)},expression:"formItem.actionDesc"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:t.handleReset}},[t._v("取消")]),t._v(" \n      "),a("Button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("提交")])],1)],1)],1)},s=[],n=(a("f751"),{name:"MenuAction",props:{value:Object},data:function(){return{modalVisible:!1,modalTitle:"",confirmModal:!1,formItemRules:{actionCode:[{required:!0,message:"操作标识不能为空",trigger:"blur"}],actionName:[{required:!0,message:"操作名称不能为空",trigger:"blur"}]},formItem:{actionId:"",actionCode:"",actionName:"",path:"",status:1,statusSwatch:!0,menuId:"",priority:0,actionDesc:""},columns:[{title:"操作名称",key:"actionName"},{title:"操作标识",key:"actionCode"},{title:"请求地址",key:"path"},{title:"状态",slot:"status",key:"status"},{title:"描述",key:"actionDesc"},{title:"操作",slot:"action",width:150}],data:[]}},methods:{handleModal:function(t){t?(this.modalTitle="编辑操作",this.formItem=Object.assign({},this.formItem,t),this.formItem.statusSwatch=1===this.formItem.status):this.modalTitle="添加操作",this.formItem.menuId=this.value.menuId,this.modalVisible=!0},handleReset:function(){var t={actionId:"",actionCode:"",actionName:"",path:"",status:1,statusSwatch:!0,menuId:"",priority:0,actionDesc:""};this.formItem=t,this.$refs["actionForm"].resetFields(),this.modalVisible=!1},handleSubmit:function(){var t=this;this.$refs["actionForm"].validate(function(e){e&&(t.formItem.status=t.formItem.statusSwatch?1:0,t.formItem.actionId?updateAction(t.formItem).then(function(e){t.handleReset(),t.handleSearch(),0===e.code&&t.$Message.success("保存成功")}):addAction(t.formItem).then(function(e){t.handleReset(),t.handleSearch(),0===e.code&&t.$Message.success("保存成功")}))})},handleSearch:function(){var t=this;this.value.menuId?getActions(this.value.menuId).then(function(e){t.data=e.data.list}):this.data=[]},handleRemove:function(t){var e=this;removeAction({actionId:t.actionId}).then(function(t){e.handleSearch(),0===t.code&&(e.pageInfo.page=1,e.$Message.success("删除成功"))})}},watch:{value:function(t){this.handleSearch()}},mounted:function(){}}),i=n,l=a("2877"),r=Object(l["a"])(i,o,s,!1,null,null,null);r.options.__file="menu-action.vue";e["default"]=r.exports}}]);