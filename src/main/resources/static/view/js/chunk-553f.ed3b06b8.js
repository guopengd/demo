(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-553f","1f27","3798"],{"0532":function(t,e,a){"use strict";var o=a("b5ab"),s=a.n(o);s.a},"1f27":function(t,e,a){"use strict";a.r(e),a.d(e,"getMenuList",function(){return s});a("cadf"),a("551c"),a("097d");var o=a("66df"),s=function(){return o["default"].request({url:"sys/menu/list",method:"get"})}},3798:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"search-con search-con-top"},[a("ButtonGroup",[a("Button",{staticClass:"search-btn",attrs:{disabled:!t.value.menuId,type:"primary"},on:{click:function(e){t.handleModal()}}},[a("Icon",{attrs:{type:"search"}}),t._v("  新建操作\n      ")],1)],1)],1),a("Table",{attrs:{columns:t.columns,data:t.data},scopedSlots:t._u([{key:"status",fn:function(t){var e=t.row;return[1===e.status?a("Badge",{attrs:{status:"success",text:"有效"}}):a("Badge",{attrs:{status:"error",text:"无效"}})]}},{key:"action",fn:function(e){var o=e.row;return[a("a",{on:{click:function(e){t.handleModal(o)}}},[t._v("编辑")]),t._v("  \n      "),a("Poptip",{attrs:{confirm:"",title:"确定删除吗?"},on:{"on-ok":function(e){t.handleRemove(o)}}},[a("a",[t._v("删除")])])]}}])}),a("Modal",{attrs:{title:t.modalTitle,width:"680"},on:{"on-cancel":t.handleReset},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[a("Form",{ref:"actionForm",attrs:{model:t.formItem,rules:t.formItemRules,"label-width":100}},[a("FormItem",{attrs:{label:"所属菜单"}},[a("Input",{attrs:{disabled:""},model:{value:t.value.menuName,callback:function(e){t.$set(t.value,"menuName",e)},expression:"value.menuName"}})],1),a("FormItem",{attrs:{label:"操作标识",prop:"actionCode"}},[a("Input",{attrs:{placeholder:"请输入内容"},model:{value:t.formItem.actionCode,callback:function(e){t.$set(t.formItem,"actionCode",e)},expression:"formItem.actionCode"}})],1),a("FormItem",{attrs:{label:"操作名称",prop:"actionName"}},[a("Input",{attrs:{placeholder:"请输入内容"},model:{value:t.formItem.actionName,callback:function(e){t.$set(t.formItem,"actionName",e)},expression:"formItem.actionName"}})],1),a("FormItem",{attrs:{label:"请求地址",prop:"path"}},[a("Input",{attrs:{placeholder:"请输入内容"},model:{value:t.formItem.path,callback:function(e){t.$set(t.formItem,"path",e)},expression:"formItem.path"}})],1),a("FormItem",{attrs:{label:"优先级"}},[a("InputNumber",{model:{value:t.formItem.priority,callback:function(e){t.$set(t.formItem,"priority",e)},expression:"formItem.priority"}})],1),a("FormItem",{attrs:{label:"状态"}},[a("i-switch",{attrs:{size:"large"},model:{value:t.formItem.statusSwatch,callback:function(e){t.$set(t.formItem,"statusSwatch",e)},expression:"formItem.statusSwatch"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("有效")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("无效")])])],1),a("FormItem",{attrs:{label:"描述"}},[a("Input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:t.formItem.actionDesc,callback:function(e){t.$set(t.formItem,"actionDesc",e)},expression:"formItem.actionDesc"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:t.handleReset}},[t._v("取消")]),t._v(" \n      "),a("Button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("提交")])],1)],1)],1)},s=[],n=(a("f751"),{name:"MenuAction",props:{value:Object},data:function(){return{modalVisible:!1,modalTitle:"",confirmModal:!1,formItemRules:{actionCode:[{required:!0,message:"操作标识不能为空",trigger:"blur"}],actionName:[{required:!0,message:"操作名称不能为空",trigger:"blur"}]},formItem:{actionId:"",actionCode:"",actionName:"",path:"",status:1,statusSwatch:!0,menuId:"",priority:0,actionDesc:""},columns:[{title:"操作名称",key:"actionName"},{title:"操作标识",key:"actionCode"},{title:"请求地址",key:"path"},{title:"状态",slot:"status",key:"status"},{title:"描述",key:"actionDesc"},{title:"操作",slot:"action",width:150}],data:[]}},methods:{handleModal:function(t){t?(this.modalTitle="编辑操作",this.formItem=Object.assign({},this.formItem,t),this.formItem.statusSwatch=1===this.formItem.status):this.modalTitle="添加操作",this.formItem.menuId=this.value.menuId,this.modalVisible=!0},handleReset:function(){var t={actionId:"",actionCode:"",actionName:"",path:"",status:1,statusSwatch:!0,menuId:"",priority:0,actionDesc:""};this.formItem=t,this.$refs["actionForm"].resetFields(),this.modalVisible=!1},handleSubmit:function(){var t=this;this.$refs["actionForm"].validate(function(e){e&&(t.formItem.status=t.formItem.statusSwatch?1:0,t.formItem.actionId?updateAction(t.formItem).then(function(e){t.handleReset(),t.handleSearch(),0===e.code&&t.$Message.success("保存成功")}):addAction(t.formItem).then(function(e){t.handleReset(),t.handleSearch(),0===e.code&&t.$Message.success("保存成功")}))})},handleSearch:function(){var t=this;this.value.menuId?getActions(this.value.menuId).then(function(e){t.data=e.data.list}):this.data=[]},handleRemove:function(t){var e=this;removeAction({actionId:t.actionId}).then(function(t){e.handleSearch(),0===t.code&&(e.pageInfo.page=1,e.$Message.success("删除成功"))})}},watch:{value:function(t){this.handleSearch()}},mounted:function(){}}),r=n,i=a("2877"),l=Object(i["a"])(r,o,s,!1,null,null,null);l.options.__file="menu-action.vue";e["default"]=l.exports},"779d":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",{attrs:{shadow:""}},[a("Row",{attrs:{gutter:16}},[a("i-col",{attrs:{span:"6"}},[a("tree-table",{attrs:{height:"900","expand-key":"title","expand-type":!1,"tree-type":!0,"is-fold":!1,selectable:!1,columns:t.columns,data:t.data},on:{"radio-click":t.rowClick},scopedSlots:t._u([{key:"order",fn:function(t){return[1===t.row.status?a("Badge",{attrs:{status:"success",text:"有效"}}):a("Badge",{attrs:{status:"error",text:"无效"}})]}}])})],1),a("div",{staticStyle:{display:"block",position:"absolute",top:"0",bottom:"0",left:"25%","border-left":"1px solid #eee"}}),a("Col",{attrs:{span:"18"}},[a("Row",[a("Col",{attrs:{span:"24"}},[a("div",{staticClass:"search-con search-con-top"},[a("ButtonGroup",[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.setEnabled(!0)}}},[t._v("新建")]),a("Button",{attrs:{type:"primary",disabled:!t.formItem.menuId},on:{click:function(e){t.setEnabled(!1)}}},[t._v("编辑")]),a("Button",{attrs:{type:"primary",disabled:!t.formItem.menuId},on:{click:function(e){t.confirmModal=!0}}},[t._v("删除")])],1),a("Modal",{attrs:{title:"提示"},on:{"on-ok":t.handleRemove},model:{value:t.confirmModal,callback:function(e){t.confirmModal=e},expression:"confirmModal"}},[t._v("\n                确定删除,菜单资源【"+t._s(t.formItem.menuName)+"】吗?"+t._s(t.formItem.children&&t.formItem.children.length>0?"存在子菜单,将一起删除.是否继续?":"")+"\n\n              ")])],1),a("Form",{ref:"menuForm",attrs:{model:t.formItem,rules:t.formItemRules,"label-width":100}},[a("FormItem",{attrs:{label:"父级菜单"}},[a("treeselect",{attrs:{disabled:t.disabled,options:t.selectTreeData,"default-expand-level":1,normalizer:t.treeSelectNormalizer},model:{value:t.formItem.parentId,callback:function(e){t.$set(t.formItem,"parentId",e)},expression:"formItem.parentId"}})],1),a("FormItem",{attrs:{label:"菜单标识",prop:"menuCode"}},[a("Input",{attrs:{disabled:t.disabled,placeholder:"请输入内容"},model:{value:t.formItem.menuCode,callback:function(e){t.$set(t.formItem,"menuCode",e)},expression:"formItem.menuCode"}})],1),a("FormItem",{attrs:{label:"菜单名称",prop:"menuName"}},[a("Input",{attrs:{disabled:t.disabled,placeholder:"请输入内容"},model:{value:t.formItem.menuName,callback:function(e){t.$set(t.formItem,"menuName",e)},expression:"formItem.menuName"}})],1),a("FormItem",{attrs:{label:"请求地址",prop:"path"}},[a("Input",{attrs:{disabled:t.disabled,placeholder:"请输入内容"},model:{value:t.formItem.path,callback:function(e){t.$set(t.formItem,"path",e)},expression:"formItem.path"}},[a("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend",disabled:t.disabled},slot:"prepend",model:{value:t.formItem.prefix,callback:function(e){t.$set(t.formItem,"prefix",e)},expression:"formItem.prefix"}},[a("Option",{attrs:{value:"/"}},[t._v("/")]),a("Option",{attrs:{value:"http://"}},[t._v("http://")]),a("Option",{attrs:{value:"https://"}},[t._v("https://")])],1),a("Select",{staticStyle:{width:"100px"},attrs:{slot:"append",disabled:t.disabled},slot:"append",model:{value:t.formItem.target,callback:function(e){t.$set(t.formItem,"target",e)},expression:"formItem.target"}},[a("Option",{attrs:{value:"_self"}},[t._v("窗口内打开")]),a("Option",{attrs:{value:"_blank"}},[t._v("新窗口打开")])],1)],1)],1),a("FormItem",{attrs:{label:"图标"}},[a("Input",{attrs:{disabled:t.disabled,placeholder:"请输入内容"},model:{value:t.formItem.icon,callback:function(e){t.$set(t.formItem,"icon",e)},expression:"formItem.icon"}})],1),a("FormItem",{attrs:{label:"优先级"}},[a("InputNumber",{attrs:{disabled:t.disabled},model:{value:t.formItem.priority,callback:function(e){t.$set(t.formItem,"priority",e)},expression:"formItem.priority"}})],1),a("FormItem",{attrs:{label:"状态"}},[a("i-switch",{attrs:{disabled:t.disabled,size:"large"},model:{value:t.formItem.statusSwatch,callback:function(e){t.$set(t.formItem,"statusSwatch",e)},expression:"formItem.statusSwatch"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("有效")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("无效")])])],1),a("FormItem",{attrs:{label:"描述"}},[a("Input",{attrs:{disabled:t.disabled,type:"textarea",placeholder:"请输入内容"},model:{value:t.formItem.menuDesc,callback:function(e){t.$set(t.formItem,"menuDesc",e)},expression:"formItem.menuDesc"}})],1),a("FormItem",[a("Button",{attrs:{disabled:t.disabled,type:"primary"},on:{click:t.handleSubmit}},[t._v("保存")]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{disabled:t.disabled},on:{click:function(e){t.setEnabled(!0)}}},[t._v("重置")])],1)],1),a("Divider",{attrs:{orientation:"left"}},[t._v("操作资源")]),a("menu-action",{attrs:{value:t.formItem}})],1)],1)],1)],1),t.spinShow?a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),a("div",[t._v("Loading")])],1):t._e()],1)],1)},s=[],n=(a("f751"),a("cadf"),a("551c"),a("097d"),a("3798")),r=a("1f27"),i={name:"SystemMenu",components:{MenuAction:n["default"]},data:function(){return{confirmModal:!1,disabled:!0,selectTreeData:[],formItemRules:{menuCode:[{required:!0,message:"菜单标识不能为空",trigger:"blur"}],menuName:[{required:!0,message:"菜单名称不能为空",trigger:"blur"}]},formItem:{menuId:"",menuCode:"",menuName:"",icon:"",path:"",prefix:"/",target:"_self",status:1,statusSwatch:!0,parentId:"0",priority:0,menuDesc:""},columns:[{title:"菜单名称",key:"title",minWidth:"200px"},{title:"状态",key:"order",type:"template",template:"status"}],data:[],spinShow:!1}},methods:{getMenu:function(){var t=this;Object(r["getMenuList"])().then(function(e){t.data=e.data,console.log(t.data),t.spinShow=!1}).catch(function(){return t.spinShow=!1})},treeSelectNormalizer:function(t){return{id:t.menuId,label:t.menuName,children:t.children}},setSelectTree:function(t){var e={menuId:0,menuName:"根节点"};this.selectTreeData=[e].concat(t)},setEnabled:function(t){t&&this.handleReset(),this.disabled=!1},rowClick:function(t){this.disabled=!0,this.handleReset(),t&&(this.formItem=Object.assign({},t.row),this.formItem.statusSwatch=1===this.formItem.status)},handleReset:function(){this.formItem={menuId:"",menuCode:"",menuName:"",icon:"",path:"",prefix:"/",target:"_self",status:1,statusSwatch:!0,parentId:"0",priority:0,menuDesc:""},this.$refs["menuForm"].resetFields()},handleSubmit:function(){var t=this;this.$refs["menuForm"].validate(function(e){e&&(t.formItem.status=t.formItem.statusSwatch?1:0,t.formItem.menuId?updateMenu(t.formItem).then(function(e){0===e.code&&(t.disabled=!0,t.$Message.success("保存成功")),t.handleSearch()}):addMenu(t.formItem).then(function(e){0===e.code&&(t.disabled=!0,t.$Message.success("保存成功")),t.handleSearch()}))})},handleRemove:function(){var t=this;removeMenu({menuId:this.formItem.menuId}).then(function(e){t.handleReset(),t.handleSearch(),0===e.code&&t.$Message.success("删除成功")})},handleSearch:function(){var t=this;getMenus().then(function(e){var a={primaryKey:"menuId",parentKey:"parentId",startPid:"0"};t.data=listConvertTree(e.data.list,a),t.setSelectTree(t.data)})},handleSpinCustom:function(){this.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),t("div","Loading")])}})}},mounted:function(){this.getMenu()}},l=i,m=(a("0532"),a("2877")),c=Object(m["a"])(l,o,s,!1,null,null,null);c.options.__file="menu.vue";e["default"]=c.exports},b5ab:function(t,e,a){}}]);